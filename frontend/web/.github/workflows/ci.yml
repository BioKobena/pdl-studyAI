# CI/CD pour voir si tout est ok dans notre projet
# Ce script s'exécute automatiquement lorsqu'on fait push sur les différentes branches ou un pull_request sur les différentes branches énumérées

name: CI/CD for Next.js

on:
  push:
    branches: ["dev", "frontend", "dev-reset"]
  pull_request:
    branches: [ "master", "dev", "dev-reset" ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install dependencies
        run: npm install
      # Pas de test dans notre cas, donc cette ligne ne sera pas utilisée
      - name: Run tests
        run: npm run test --if-present

      # Test si on a pas de problème de syntaxe dans notre code 
      - name: Test if lint is ok
        run: npm run lint

      # Ce run permet de tester si 
      - name: Build project
        run: npm run build
